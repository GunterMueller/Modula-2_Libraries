% book.sty  4-Sep-86

\typeout{Document Style `book'. Released 4 September 1986.}

% For multiple languages, we use the construct
% \ifcase\@language ...Deutsch case...\or
% ...French case...\else
% ...English case\fi
\def\@deutsch{0 }%                      Deutsch, for \ifcase
\def\@french{1 }%                       French
\def\@english{99 }%                     English
\let\@language\@english
\def\ds@deutsch{\let\@language\@deutsch}
\def\ds@french{\let\@language\@french}

\def\@ptsize{0} \@namedef{ds@11pt}{\def\@ptsize{1}}
\@namedef{ds@12pt}{\def\@ptsize{2}} 
\@twosidetrue \@mparswitchtrue \def\ds@draft{\overfullrule 5pt} 
\@options
\input bk1\@ptsize.sty\relax

\def\library{Olsen \& Associates Portable Modula-2 Library}
\def\Library{Olsen \& Associates Portable Modula-2 Library}

\def\labelenumi{\arabic{enumi}.} 
\def\theenumi{\arabic{enumi}} 
\def\labelenumii{(\alph{enumii})}
\def\theenumii{\alph{enumii}}
\def\p@enumii{\theenumi}
\def\labelenumiii{\roman{enumiii}.}
\def\theenumiii{\roman{enumiii}}
\def\p@enumiii{\theenumi(\theenumii)}
\def\labelenumiv{\Alph{enumiv}.}
\def\theenumiv{\Alph{enumiv}} 
\def\p@enumiv{\p@enumiii\theenumiii}

\def\labelitemi{$\bullet$}
\def\labelitemii{\bf --}
\def\labelitemiii{$\ast$}
\def\labelitemiv{$\cdot$}

\def\verse{\let\\=\@centercr 
 \list{}{\itemsep\z@ \itemindent -1.5em\listparindent \itemindent 
 \rightmargin\leftmargin\advance\leftmargin 1.5em}\item[]}
\let\endverse\endlist
\def\quotation{\list{}{\listparindent 1.5em
 \itemindent\listparindent
 \rightmargin\leftmargin\parsep 0pt plus 1pt}\item[]}
\let\endquotation=\endlist
\def\quote{\list{}{\rightmargin\leftmargin}\item[]}
\let\endquote=\endlist

\def\descriptionlabel#1{\hspace\labelsep \bf #1}
\def\description{\list{}{\labelwidth\z@ \itemindent-\leftmargin
 \let\makelabel\descriptionlabel}}
\let\enddescription\endlist
\newdimen\descriptionmargin
\descriptionmargin=3em


\def\titlepage{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \else \newpage \fi \thispagestyle{empty}\c@page\z@}
\def\endtitlepage{\if@restonecol\twocolumn \else \newpage \fi}

\arraycolsep 5pt \tabcolsep 6pt \arrayrulewidth .4pt \doublerulesep 2pt 
\tabbingsep \labelsep 
\skip\@mpfootins = \skip\footins
\fboxsep = 3pt \fboxrule = .4pt 

\newcounter{part}
\newcounter {chapter}
\newcounter {section}[chapter]
\newcounter {subsection}[section]
\newcounter {subsubsection}[subsection]
\newcounter {paragraph}[subsubsection]
\newcounter {subparagraph}[paragraph]

\def\thepart {\Roman{part}}
\def\thechapter {\arabic{chapter}}
\def\thesection {\thechapter.\arabic{section}}
\def\thesubsection {\thesection.\arabic{subsection}}
\def\thesubsubsection {\thesubsection .\arabic{subsubsection}}
\def\theparagraph {\thesubsubsection.\arabic{paragraph}}
\def\thesubparagraph {\theparagraph.\arabic{subparagraph}}
\def\@chapapp{Chapter}


\def\@pnumwidth{1.55em}
\def\@tocrmarg {2.55em}
\def\@dotsep{4.5}
\setcounter{tocdepth}{2}


\def\tableofcontents{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \fi\chapter*{Contents\@mkboth{CONTENTS}{CONTENTS}}
 \@starttoc{toc}\if@restonecol\twocolumn\fi}
\def\l@part#1#2{\addpenalty{-\@highpenalty}
 \addvspace{2.25em plus 1pt} \begingroup
 \@tempdima 3em \parindent \z@ \rightskip \@pnumwidth \parfillskip
-\@pnumwidth 
 {\large \bf \leavevmode #1\hfil \hbox to\@pnumwidth{\hss #2}}\par
 \nobreak \endgroup}

\def\l@chapter#1#2{\pagebreak[3] 
 \vskip 1.0em plus 1pt \@tempdima 1.5em \begingroup
 \parindent \z@ \rightskip \@pnumwidth 
 \parfillskip -\@pnumwidth 
 \bf \leavevmode #1\hfil \hbox to\@pnumwidth{\hss #2}\par
 \endgroup}
\def\l@section{\@dottedtocline{1}{1.5em}{2.3em}}
\def\l@subsection{\@dottedtocline{2}{3.8em}{3.2em}}
\def\l@subsubsection{\@dottedtocline{3}{7.0em}{4.1em}}
\def\l@paragraph{\@dottedtocline{4}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{5}{12em}{6em}}
\def\listoffigures{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \fi\chapter*{List of Figures\@mkboth
 {LIST OF FIGURES}{LIST OF FIGURES}}\@starttoc{lof}\if@restonecol\twocolumn
 \fi}
\def\l@figure{\@dottedtocline{1}{1.5em}{2.3em}}
\def\listoftables{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \fi\chapter*{List of Tables\@mkboth
 {LIST OF TABLES}{LIST OF TABLES}}\@starttoc{lot}\if@restonecol\twocolumn
 \fi}
\let\l@table\l@figure


\def\thebibliography#1{\chapter*{Bibliography\@mkboth
 {BIBLIOGRAPHY}{BIBLIOGRAPHY}}
\list
{[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
\advance\leftmargin\labelsep
\usecounter{enumi}}
\def\newblock{\hskip .11em plus .33em minus -.07em}
\sloppy\clubpenalty4000\widowpenalty4000
\sfcode`\.=1000\relax}
\let\endthebibliography=\endlist


%New Stuff

% The following clutter the index
% \newcommand{\module}[1]{{\tt #1}\index{{\noexpand\noexpand\noexpand\tt #1}, Module}} % print and index module name
% \newcommand{\proc}[1]{{\tt #1}\index{{\noexpand\noexpand\noexpand\tt #1}, Procedure}}% print and index procedure name
\newcommand{\module}[1]{{\tt #1}\index{{\noexpand\noexpand\noexpand\tt #1}}} % print and index module name
\newcommand{\proc}[1]{{\tt #1}\index{{\noexpand\noexpand\noexpand\tt #1}}}% print and index procedure name

\newcommand{\code}[1]{{\tt #1}}         % code other than module or proc
\newcommand{\codeterm}[1]{{\tt #1}\index{\noexpand\noexpand\noexpand\tt #1}}  
%print and index codeterm name
\newcommand{\file}[1]{{\tt #1}{\def\_{\noexpand\noexpand\noexpand\_}\index{File {\noexpand\noexpand\noexpand\tt #1}}}}% ref to filename
\newcommand{\newterm}[1]{{\em #1}\index{#1}}% print and index a special term
\newcommand{\term}[1]{#1\index{#1}}% print and index a special term
%offset ``Fine Points''
\newcommand{\finepoint}[1]{\medskip{\small Fine Point: \begin{quote} #1 
	\end{quote} \medskip}}
\newcommand{\finepoints}[1]{\medskip{\small Fine Points: \begin{quote} #1 
	\end{quote} \medskip}}
\newcommand{\important}[1]{\medskip{\em Important: \begin{quote} #1
	\end{quote} \medskip}}
\newcommand{\msdos}[1]{\medskip{\em{MS-DOS Note: \begin{quote} #1
	\end{quote} \medskip}}}
\newcommand{\msdoss}[1]{\medskip{\em{MS-DOS Notes: \begin{quote} #1
	\end{quote} \medskip}}}
\newcommand{\porting}[1]{\medskip{\em{Porting Note: \begin{quote} #1
	\end{quote} \medskip}}}
\newcommand{\portings}[1]{\medskip{\em{Porting Notes: \begin{quote} #1
	\end{quote} \medskip}}}
\newcommand{\task}[1]{\medskip{\em{Tasks Note: \begin{quote} #1
	\end{quote} \medskip}}}
\newcommand{\tasks}[1]{\medskip{\em{Tasks Notes: \begin{quote} #1
	\end{quote} \medskip}}}

\newcommand{\portability}[1]{\medskip{\small Portability Note: \begin{quote} 
	#1 \end{quote}}\medskip}
\newcommand{\portabilitys}[1]{\medskip{\small Portability Notes: \begin{quote} 
	#1 \end{quote}}\medskip}

\newcommand{\xquote}[3]{\begin{quote} {\em #3} \\ {\begin{flushright} 
        --- #1 {\em #2} \end{flushright}} \end{quote}}

\def\word@index{\ifcase\@language Verzeichnis\else Index\fi} 
\newif\if@restonecol
\def\theindex{\@restonecoltrue\if@twocolumn\@restonecolfalse\fi
\columnseprule \z@
\columnsep 35pt\twocolumn[\section*{\word@index}]
 \markboth{\uppercase{\word@index}}{\uppercase{\word@index}}\thispagestyle{plain}\parindent\z@
 \parskip\z@ plus .3pt\relax\let\item\@idxitem
 \sloppy\raggedright}
\def\@idxitem{\par\hangindent 40pt}
\def\subitem{\par\hangindent 40pt \hspace*{20pt}}
\def\subsubitem{\par\hangindent 40pt \hspace*{30pt}}
% Olsen index stuff hacked in here, see also /software/commands/latex scripts
\def\lastindexentry{}
\def\lastindexpage{}
\def\indexentry#1#2{%
% First new index keyword if needed:
\def\thisindexentry{#1}\ifx\thisindexentry\lastindexentry%
\else\@idxitem{#1}\def\lastindexpage{}\fi%
% Now new page # if not same as last:
\def\thisindexpage{#2}\ifx\thisindexpage\lastindexpage\else\unskip, \fi%
\def\lastindexentry{#1}%
\def\lastindexpage{#2}%
#2}
\def\endtheindex{\if@restonecol\onecolumn\else\clearpage\fi}
\def\indexspace{\par \vskip 10pt plus 5pt minus 3pt\relax}

\def\footnoterule{\kern-3\p@ 
 \hrule width .4\columnwidth 
 \kern 2.6\p@} 

\long\def\@makefntext#1{\parindent 1em\noindent 
 \hbox to 1.8em{\hss$^{\@thefnmark}$}#1}


\setcounter{topnumber}{2}
\def\topfraction{.7}
\setcounter{bottomnumber}{1}
\def\bottomfraction{.3}
\setcounter{totalnumber}{3}
\def\textfraction{.2}
\def\floatpagefraction{.5}
\setcounter{dbltopnumber}{2}
\def\dbltopfraction{.7}
\def\dblfloatpagefraction{.5}

\long\def\@makecaption#1#2{
 \vskip 10pt 
 \setbox\@tempboxa\hbox{#1: #2}
 \ifdim \wd\@tempboxa >\hsize #1: #2\par \else \hbox
to\hsize{\hfil\box\@tempboxa\hfil} 
 \fi}


\newcounter{figure}[chapter]
\def\thefigure{\thechapter.\@arabic\c@figure}
\def\fps@figure{tbp}
\def\ftype@figure{1}
\def\ext@figure{lof}
\def\fnum@figure{Figure \thefigure}
\def\figure{\@float{figure}}
\let\endfigure\end@float
\@namedef{figure*}{\@dblfloat{figure}}
\@namedef{endfigure*}{\end@dblfloat}
\newcounter{table}[chapter]
\def\thetable{\thechapter.\@arabic\c@table}
\def\fps@table{tbp}
\def\ftype@table{2}
\def\ext@table{lot}
\def\fnum@table{Table \thetable}
\def\table{\@float{table}}
\let\endtable\end@float
\@namedef{table*}{\@dblfloat{table}}
\@namedef{endtable*}{\end@dblfloat}

\def\maketitle{\begin{titlepage}
 \let\footnotesize\small \let\footnoterule\relax \setcounter{page}{0}
 \null
 \vfil
 \vskip 60pt \begin{center}
 {\LARGE \@title \par} \vskip 3em {\large \lineskip .75em
 \begin{tabular}[t]{c}\@author 
 \end{tabular}\par} 
 \vskip 1.5em {\large \@date \par} \end{center} \par
\@thanks
\vfil
\null
\end{titlepage}
\setcounter{footnote}{0} \let\thanks\relax
\gdef\@thanks{}\gdef\@author{}\gdef\@title{}\let\maketitle\relax} 


\mark{{}{}} 

\def\ps@headings{\let\@mkboth\markboth
\def\@oddfoot{}\def\@evenfoot{}\def\@evenhead{\rm \thepage\hfil \sl
\leftmark}\def\@oddhead{\hbox{}\sl \rightmark \hfil
\rm\thepage}\def\chaptermark##1{\markboth {\uppercase{\ifnum \c@secnumdepth
>\m@ne
 \@chapapp\ \thechapter. \ \fi ##1}}{}}\def\sectionmark##1{\markright
{\uppercase{\ifnum \c@secnumdepth >\z@
 \thesection. \ \fi ##1}}}}
\def\ps@myheadings{\let\@mkboth\@gobbletwo
\def\@oddhead{\hbox{}\sl\rightmark \hfil
\rm\thepage}\def\@oddfoot{}\def\@evenhead{\rm \thepage\hfil\sl\leftmark\hbox
{}}\def\@evenfoot{}\def\sectionmark##1{}\def\subsectionmark##1{}}


\def\today{\ifcase\month\or
 January\or February\or March\or April\or May\or June\or
 July\or August\or September\or October\or November\or December\fi
 \space\number\day, \number\year}
\@addtoreset{equation}{chapter} 
\def\theequation{\thechapter.\arabic{equation}}


\ps@headings \pagenumbering{arabic} \onecolumn 
